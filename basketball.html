<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
    <title>Basketball Game</title>
	<script type="text/javascript" src="js/phaser.min.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
				canvas {
					margin: 0 auto;
					border: thin solid black;
				}
    </style>
</head>
<body>

<script type="text/javascript">

var game = new Phaser.Game(640, 1000, Phaser.CANVAS, '', { preload: preload, create: create, update: update });

function preload() {

    game.load.image('ball', 'assets/ball.png');
    game.load.image('hoop', 'assets/hoop.png');
		game.load.image('side rim', 'assets/side_rim.png');
		game.load.image('front rim', 'assets/front_rim.png');

}

var hoop;
var left_rim;
var right_rim;
var ball;
var front_rim;

function create() {

	game.physics.startSystem(Phaser.Physics.P2JS);

  game.physics.p2.restitution = 0.7;
  game.physics.p2.gravity.y = 1800;

	game.stage.backgroundColor = "#ffffff";

	hoop = game.add.sprite(141, 100, 'hoop');
	left_rim = game.add.sprite(241, 296, 'side rim');
	right_rim = game.add.sprite(398, 296, 'side rim');
	ball = game.add.sprite(320, 875, 'ball');
	front_rim = game.add.sprite(237, 292, 'front rim');

	game.physics.p2.enable([ left_rim, right_rim, ball ], false);

	left_rim.body.setCircle(4.5);
	left_rim.body.static = true;

	right_rim.body.setCircle(4.5);
	right_rim.body.static = true;

	circleshape = ball.body.setCircle(67); // NOTE: Full size is 96
	ball.launched = false;

	// ball.scale.setTo(0.7, 0.7);

	game.add.tween(ball.scale).to({x : 0.7, y : 0.7}, 1000, Phaser.Easing.Linear.None, true, 0, 0, false);
	// game.add.tween(circleshape).to({radius : game.physics.p2.pxm(18)}, 1000, Phaser.Easing.Linear.None, true, 0, 1, true);

	cursors = game.input.keyboard.createCursorKeys();

	game.input.onDown.add(launch, this);

}

function update() {

	if (cursors.left.isDown)
  {
      ball.body.moveLeft(200);
  }
  else if (cursors.right.isDown)
  {
      ball.body.moveRight(200);
  }

}

function launch() {

	if (ball.launched === false) {
		ball.body.velocity.y = -1650;
		// ball.launched = true;
	}

}

</script>

</body>
</html>
